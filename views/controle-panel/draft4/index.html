<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <style>
            table, th, td { border: 1px solid black; border-collapse: collapse; }
            td, th {padding: 10px;}
        </style>
        <title>Admin</title>
    </head>
    <body>
        <h2>Assiut Robotics members Data</h2>
        <button id="btn" > view data </button> <br>
        <h3> Members Data: </h3> 
        <div id="container"></div>
    <script>
        const getMembersData = () => {
            return fetch('https://assiut-robotics-website.vercel.app/members/getAllMembers?fbclid=IwAR1Vc2AE5I-B_p_kzbq7jP9UOB4FjivhIUGUVZcmEFVxuQnYWCGD_XEJ-0E')
                .then(data => data.json())
        }
        getMembersData().then((data) => {
            console.log(data);
            return data.data.members;
        }).then((jsonData) => {
            document.getElementById('btn').onclick = function(){
            let container = $("#container");
            let table = $("<table>");
            let cols = Object.keys(jsonData[0]);
            let thead = $("<thead>");
            let tr = $("<tr>");
            $.each(cols, function(i, item){
                let th = $("<th>");
                th.text(item);
                tr.append(th);
            });
            thead.append(tr);
            table.append(tr)
            $.each(jsonData, function(i, item){
                if(!item.confirm){
                let tr = $("<tr>");
                    let vals = Object.values(item);
                    $.each(vals, (i, elem) => {
                    let td = $("<td>");
                    td.text(elem);
                    tr.append(td);
                    });
                    table.append(tr);
                };
            });
            container.append(table)
        }
        })
        .catch(error => console.log('ERROR!'))
    </script>
    </body>
</html>